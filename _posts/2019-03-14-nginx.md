---
layout: post
title:  "nginx编译方法"
date: 2019-3-14 18:46:23 +0800
categories: [other]
excerpt_separator: <!--more-->
---

从nginx源码编译安装nginx
<!--more-->

### 1. 下载代码

hg管理的源码库：
`http://hg.nginx.org/nginx/file/tip`

github的只读库：
`https://github.com/nginx/nginx`

### 2. 安装必要的编译软件

基本编译软件`gcc` `g++` `cmake` `automake`

```shell
sudo apt-get install gcc g++ cmake automake
```

### 3. 安装必要的库文件

* openssl

```shell
sudo apt-get install openssl libssl-dev
```

* pcre

```shell
sudo apt-get install libpcre3 libpcre3-dev
```

* zlib

```shell
sudo apt-get install zlib1g-dev
```

### 4. 配置nginx编译环境

```shell
./configure  --prefix=/usr/local/nginx  --sbin-path=/usr/local/nginx/sbin/nginx --conf-path=/usr/local/nginx/conf/nginx.conf --error-log-path=/var/log/nginx/error.log  --http-log-path=/var/log/nginx/access.log  --pid-path=/var/run/nginx/nginx.pid --lock-path=/var/lock/nginx.lock  --user=nginx --group=nginx --with-http_ssl_module --with-http_stub_status_module --with-http_gzip_static_module --http-client-body-temp-path=/var/tmp/nginx/client/ --http-proxy-temp-path=/var/tmp/nginx/proxy/ --http-fastcgi-temp-path=/var/tmp/nginx/fcgi/ --http-uwsgi-temp-path=/var/tmp/nginx/uwsgi --http-scgi-temp-path=/var/tmp/nginx/scgi --with-pcre
```

也可以修改文件`\nginx\auto\options`

### 5. 编译

```shell
make
```